<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Abstract plot cache implementation."><title>PlotCache in subspace_farmer::farm - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-84e720fa.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="subspace_farmer" data-themes="" data-resource-suffix="" data-rustdoc-version="1.89.0-nightly (70b3f4666 2025-05-30)" data-channel="nightly" data-search-js="search-f7877310.js" data-settings-js="settings-5514c975.js" ><script src="../../static.files/storage-4e99c027.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-fd3af306.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-32bb7600.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../subspace_farmer/index.html">subspace_<wbr>farmer</a><span class="version">0.1.3</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Plot<wbr>Cache</a></h2><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.is_piece_maybe_stored" title="is_piece_maybe_stored">is_piece_maybe_stored</a></li><li><a href="#tymethod.read_piece" title="read_piece">read_piece</a></li><li><a href="#tymethod.try_store_piece" title="try_store_piece">try_store_piece</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><div id="rustdoc-modnav"><h2><a href="index.html">In subspace_<wbr>farmer::<wbr>farm</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">subspace_farmer</a>::<wbr><a href="index.html">farm</a></div><h1>Trait <span class="trait">PlotCache</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/subspace_farmer/farm.rs.html#214-235">Source</a> </span></div><pre class="rust item-decl"><code>pub trait PlotCache:
    <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a>
    + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a>
    + <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a> {
    // Required methods
    fn <a href="#tymethod.is_piece_maybe_stored" class="fn">is_piece_maybe_stored</a>&lt;'life0, 'life1, 'async_trait&gt;(
        &amp;'life0 self,
        key: &amp;'life1 RecordKey,
    ) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="enum.MaybePieceStoredResult.html" title="enum subspace_farmer::farm::MaybePieceStoredResult">MaybePieceStoredResult</a>, <a class="type" href="type.FarmError.html" title="type subspace_farmer::farm::FarmError">FarmError</a>&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;
       <span class="where">where Self: 'async_trait,
             'life0: 'async_trait,
             'life1: 'async_trait</span>;
<span class="item-spacer"></span>    fn <a href="#tymethod.try_store_piece" class="fn">try_store_piece</a>&lt;'life0, 'life1, 'async_trait&gt;(
        &amp;'life0 self,
        piece_index: PieceIndex,
        piece: &amp;'life1 Piece,
    ) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>, <a class="type" href="type.FarmError.html" title="type subspace_farmer::farm::FarmError">FarmError</a>&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;
       <span class="where">where Self: 'async_trait,
             'life0: 'async_trait,
             'life1: 'async_trait</span>;
<span class="item-spacer"></span>    fn <a href="#tymethod.read_piece" class="fn">read_piece</a>&lt;'life0, 'life1, 'async_trait&gt;(
        &amp;'life0 self,
        key: &amp;'life1 RecordKey,
    ) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;Piece&gt;, <a class="type" href="type.FarmError.html" title="type subspace_farmer::farm::FarmError">FarmError</a>&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;
       <span class="where">where Self: 'async_trait,
             'life0: 'async_trait,
             'life1: 'async_trait</span>;
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Abstract plot cache implementation.</p>
<p>Plot cache is a cache that exploits space towards the end of the plot that is not yet occupied
by sectors in order to increase effective caching space, which helps with plotting speed for
small farmers since they don’t need to retrieve the same pieces from the network over and over
again, which is slower and uses a lot of Internet bandwidth.</p>
</div></details><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.is_piece_maybe_stored" class="method"><a class="src rightside" href="../../src/subspace_farmer/farm.rs.html#218-221">Source</a><h4 class="code-header">fn <a href="#tymethod.is_piece_maybe_stored" class="fn">is_piece_maybe_stored</a>&lt;'life0, 'life1, 'async_trait&gt;(
    &amp;'life0 self,
    key: &amp;'life1 RecordKey,
) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="enum.MaybePieceStoredResult.html" title="enum subspace_farmer::farm::MaybePieceStoredResult">MaybePieceStoredResult</a>, <a class="type" href="type.FarmError.html" title="type subspace_farmer::farm::FarmError">FarmError</a>&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<div class="where">where
    Self: 'async_trait,
    'life0: 'async_trait,
    'life1: 'async_trait,</div></h4></section></summary><div class="docblock"><p>Check if a piece is already stored in this cache, or it can be added to this cache.
The piece is not guaranteed to be stored, because it might be overwritten with a new
sector any time.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.try_store_piece" class="method"><a class="src rightside" href="../../src/subspace_farmer/farm.rs.html#225-229">Source</a><h4 class="code-header">fn <a href="#tymethod.try_store_piece" class="fn">try_store_piece</a>&lt;'life0, 'life1, 'async_trait&gt;(
    &amp;'life0 self,
    piece_index: PieceIndex,
    piece: &amp;'life1 Piece,
) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>, <a class="type" href="type.FarmError.html" title="type subspace_farmer::farm::FarmError">FarmError</a>&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<div class="where">where
    Self: 'async_trait,
    'life0: 'async_trait,
    'life1: 'async_trait,</div></h4></section></summary><div class="docblock"><p>Store piece in cache if there is free space, and return <code>Ok(true)</code>.
Returns <code>Ok(false)</code> if there is no free space, or the farm or process is shutting down.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.read_piece" class="method"><a class="src rightside" href="../../src/subspace_farmer/farm.rs.html#234">Source</a><h4 class="code-header">fn <a href="#tymethod.read_piece" class="fn">read_piece</a>&lt;'life0, 'life1, 'async_trait&gt;(
    &amp;'life0 self,
    key: &amp;'life1 RecordKey,
) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;Piece&gt;, <a class="type" href="type.FarmError.html" title="type subspace_farmer::farm::FarmError">FarmError</a>&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<div class="where">where
    Self: 'async_trait,
    'life0: 'async_trait,
    'life1: 'async_trait,</div></h4></section></summary><div class="docblock"><p>Read piece from cache.</p>
<p>Returns <code>None</code> if not cached.</p>
</div></details></div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><section id="impl-PlotCache-for-DiskPlotCache" class="impl"><a class="src rightside" href="../../src/subspace_farmer/single_disk_farm/plot_cache.rs.html#59-80">Source</a><a href="#impl-PlotCache-for-DiskPlotCache" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.PlotCache.html" title="trait subspace_farmer::farm::PlotCache">PlotCache</a> for <a class="struct" href="../single_disk_farm/plot_cache/struct.DiskPlotCache.html" title="struct subspace_farmer::single_disk_farm::plot_cache::DiskPlotCache">DiskPlotCache</a></h3></section></div><script src="../../trait.impl/subspace_farmer/farm/trait.PlotCache.js" async></script></section></div></main></body></html>