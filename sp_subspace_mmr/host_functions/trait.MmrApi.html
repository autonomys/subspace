<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API to interact with MMR pallet."><title>MmrApi in sp_subspace_mmr::host_functions - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-ca0dd0c4.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="sp_subspace_mmr" data-themes="" data-resource-suffix="" data-rustdoc-version="1.92.0-nightly (6380899f3 2025-10-18)" data-channel="nightly" data-search-js="search-8d3311b9.js" data-stringdex-js="stringdex-c3e638e9.js" data-settings-js="settings-c38705f0.js" ><script src="../../static.files/storage-e2aeef58.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-ce535bd0.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-263c88ec.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">MmrApi</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../sp_subspace_mmr/index.html">sp_<wbr>subspace_<wbr>mmr</a><span class="version">0.1.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">MmrApi</a></h2><h3><a href="#provided-methods">Provided Methods</a></h3><ul class="block"><li><a href="#method.generate_proof" title="generate_proof">generate_proof</a></li><li><a href="#method.mmr_leaf_count" title="mmr_leaf_count">mmr_leaf_count</a></li><li><a href="#method.mmr_root" title="mmr_root">mmr_root</a></li><li><a href="#method.verify_proof" title="verify_proof">verify_proof</a></li><li><a href="#method.verify_proof_stateless" title="verify_proof_stateless">verify_proof_stateless</a></li></ul><h3><a href="#trait-implementations">Trait Implementations</a></h3><ul class="block trait-implementation"><li><a href="#impl-RuntimeApiInfo-for-dyn+MmrApi%3CBlock,+Hash,+BlockNumber%3E" title="RuntimeApiInfo">RuntimeApiInfo</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><div id="rustdoc-modnav"><h2><a href="index.html">In sp_<wbr>subspace_<wbr>mmr::<wbr>host_<wbr>functions</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">sp_subspace_mmr</a>::<wbr><a href="index.html">host_functions</a></div><h1>Trait <span class="trait">MmrApi</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"></span></div><pre class="rust item-decl"><code>pub trait MmrApi&lt;Block, Hash, BlockNumber&gt;: Core&lt;Block&gt;<div class="where">where
    Block: Block,
    Hash: Codec,
    BlockNumber: Codec,</div>{
    // Provided methods
    fn <a href="#method.mmr_root" class="fn">mmr_root</a>(
        &amp;self,
        __runtime_api_at_param__: &lt;Block as Block&gt;::Hash,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;Hash, Error&gt;, ApiError&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.mmr_leaf_count" class="fn">mmr_leaf_count</a>(
        &amp;self,
        __runtime_api_at_param__: &lt;Block as Block&gt;::Hash,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>, Error&gt;, ApiError&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.generate_proof" class="fn">generate_proof</a>(
        &amp;self,
        __runtime_api_at_param__: &lt;Block as Block&gt;::Hash,
        block_numbers: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;BlockNumber&gt;,
        best_known_block_number: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;BlockNumber&gt;,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;(<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="struct.EncodableOpaqueLeaf.html" title="struct sp_subspace_mmr::host_functions::EncodableOpaqueLeaf">EncodableOpaqueLeaf</a>&gt;, <a class="struct" href="struct.LeafProof.html" title="struct sp_subspace_mmr::host_functions::LeafProof">LeafProof</a>&lt;Hash&gt;), Error&gt;, ApiError&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.verify_proof" class="fn">verify_proof</a>(
        &amp;self,
        __runtime_api_at_param__: &lt;Block as Block&gt;::Hash,
        leaves: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="struct.EncodableOpaqueLeaf.html" title="struct sp_subspace_mmr::host_functions::EncodableOpaqueLeaf">EncodableOpaqueLeaf</a>&gt;,
        proof: <a class="struct" href="struct.LeafProof.html" title="struct sp_subspace_mmr::host_functions::LeafProof">LeafProof</a>&lt;Hash&gt;,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, Error&gt;, ApiError&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.verify_proof_stateless" class="fn">verify_proof_stateless</a>(
        &amp;self,
        __runtime_api_at_param__: &lt;Block as Block&gt;::Hash,
        root: Hash,
        leaves: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="struct.EncodableOpaqueLeaf.html" title="struct sp_subspace_mmr::host_functions::EncodableOpaqueLeaf">EncodableOpaqueLeaf</a>&gt;,
        proof: <a class="struct" href="struct.LeafProof.html" title="struct sp_subspace_mmr::host_functions::LeafProof">LeafProof</a>&lt;Hash&gt;,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, Error&gt;, ApiError&gt; { ... }
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>API to interact with MMR pallet.</p>
</div></details><h2 id="provided-methods" class="section-header">Provided Methods<a href="#provided-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="method.mmr_root" class="method"><h4 class="code-header">fn <a href="#method.mmr_root" class="fn">mmr_root</a>(
    &amp;self,
    __runtime_api_at_param__: &lt;Block as Block&gt;::Hash,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;Hash, Error&gt;, ApiError&gt;</h4></section></summary><div class="docblock"><p>Return the on-chain MMR root hash.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.mmr_leaf_count" class="method"><h4 class="code-header">fn <a href="#method.mmr_leaf_count" class="fn">mmr_leaf_count</a>(
    &amp;self,
    __runtime_api_at_param__: &lt;Block as Block&gt;::Hash,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>, Error&gt;, ApiError&gt;</h4></section></summary><div class="docblock"><p>Return the number of MMR blocks in the chain.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.generate_proof" class="method"><h4 class="code-header">fn <a href="#method.generate_proof" class="fn">generate_proof</a>(
    &amp;self,
    __runtime_api_at_param__: &lt;Block as Block&gt;::Hash,
    block_numbers: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;BlockNumber&gt;,
    best_known_block_number: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;BlockNumber&gt;,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;(<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="struct.EncodableOpaqueLeaf.html" title="struct sp_subspace_mmr::host_functions::EncodableOpaqueLeaf">EncodableOpaqueLeaf</a>&gt;, <a class="struct" href="struct.LeafProof.html" title="struct sp_subspace_mmr::host_functions::LeafProof">LeafProof</a>&lt;Hash&gt;), Error&gt;, ApiError&gt;</h4></section></summary><div class="docblock"><p>Generate MMR proof for a series of block numbers. If <code>best_known_block_number = Some(n)</code>,
use historical MMR state at given block height <code>n</code>. Else, use current MMR state.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.verify_proof" class="method"><h4 class="code-header">fn <a href="#method.verify_proof" class="fn">verify_proof</a>(
    &amp;self,
    __runtime_api_at_param__: &lt;Block as Block&gt;::Hash,
    leaves: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="struct.EncodableOpaqueLeaf.html" title="struct sp_subspace_mmr::host_functions::EncodableOpaqueLeaf">EncodableOpaqueLeaf</a>&gt;,
    proof: <a class="struct" href="struct.LeafProof.html" title="struct sp_subspace_mmr::host_functions::LeafProof">LeafProof</a>&lt;Hash&gt;,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, Error&gt;, ApiError&gt;</h4></section></summary><div class="docblock"><p>Verify MMR proof against on-chain MMR for a batch of leaves.</p>
<p>Note this function will use on-chain MMR root hash and check if the proof matches the hash.
Note, the leaves should be sorted such that corresponding leaves and leaf indices have the
same position in both the <code>leaves</code> vector and the <code>leaf_indices</code> vector contained in the <a href="struct.LeafProof.html" title="struct sp_subspace_mmr::host_functions::LeafProof">LeafProof</a></p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.verify_proof_stateless" class="method"><h4 class="code-header">fn <a href="#method.verify_proof_stateless" class="fn">verify_proof_stateless</a>(
    &amp;self,
    __runtime_api_at_param__: &lt;Block as Block&gt;::Hash,
    root: Hash,
    leaves: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="struct.EncodableOpaqueLeaf.html" title="struct sp_subspace_mmr::host_functions::EncodableOpaqueLeaf">EncodableOpaqueLeaf</a>&gt;,
    proof: <a class="struct" href="struct.LeafProof.html" title="struct sp_subspace_mmr::host_functions::LeafProof">LeafProof</a>&lt;Hash&gt;,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, Error&gt;, ApiError&gt;</h4></section></summary><div class="docblock"><p>Verify MMR proof against given root hash for a batch of leaves.</p>
<p>Note this function does not require any on-chain storage - the
proof is verified against given MMR root hash.</p>
<p>Note, the leaves should be sorted such that corresponding leaves and leaf indices have the
same position in both the <code>leaves</code> vector and the <code>leaf_indices</code> vector contained in the <a href="struct.LeafProof.html" title="struct sp_subspace_mmr::host_functions::LeafProof">LeafProof</a></p>
</div></details></div><h2 id="trait-implementations" class="section-header">Trait Implementations<a href="#trait-implementations" class="anchor">§</a></h2><div id="trait-implementations-list"><details class="toggle implementors-toggle" open><summary><section id="impl-RuntimeApiInfo-for-dyn+MmrApi%3CBlock,+Hash,+BlockNumber%3E" class="impl"><a href="#impl-RuntimeApiInfo-for-dyn+MmrApi%3CBlock,+Hash,+BlockNumber%3E" class="anchor">§</a><h3 class="code-header">impl&lt;Block, Hash, BlockNumber&gt; RuntimeApiInfo for dyn <a class="trait" href="trait.MmrApi.html" title="trait sp_subspace_mmr::host_functions::MmrApi">MmrApi</a>&lt;Block, Hash, BlockNumber&gt;<div class="where">where
    Block: Block,
    Hash: Codec,
    BlockNumber: Codec,</div></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedconstant.ID" class="associatedconstant trait-impl"><a href="#associatedconstant.ID" class="anchor">§</a><h4 class="code-header">const <a class="constant">ID</a>: [<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.array.html">8</a>]</h4></section></summary><div class='docblock'>The identifier of the runtime api.</div></details><details class="toggle" open><summary><section id="associatedconstant.VERSION" class="associatedconstant trait-impl"><a href="#associatedconstant.VERSION" class="anchor">§</a><h4 class="code-header">const <a class="constant">VERSION</a>: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u32.html">u32</a> = 2u32</h4></section></summary><div class='docblock'>The version of the runtime api.</div></details></div></details></div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"></div><script src="../../trait.impl/sp_mmr_primitives/trait.MmrApi.js" async></script></section></div></main></body></html>